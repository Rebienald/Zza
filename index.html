<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Beloved Mahal</title>
    <!-- Preload critical fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&display=swap" as="style">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&display=swap">
    <!-- Load animate.css only when needed -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload="this.media='all'">
    <style>
        :root {
            --primary-color: #c17a74;
            --secondary-color: #e8a0a0;
            --accent-color: #ffd700;
            --text-color: #5a4a3a;
            --bg-color: #f8f6e9;
        }
        
        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            font-family: 'Montserrat', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-color);
            text-align: center;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(248,246,233,0.9) 0%, rgba(220,210,190,0.7) 100%);
            position: relative;
        }

        /* Simplified background pattern */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path fill="%23e8a0a0" opacity="0.2" d="M30,50 Q50,30 70,50 Q50,70 30,50 Z"/></svg>');
            background-size: 100px;
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
            will-change: transform;
            transform: translateZ(0);
        }

        /* Removed complex animation for background */

        .container {
            max-width: 900px;
            padding: 50px;
            background: rgba(255,253,245,0.95);
            border-radius: 25px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            border: 1px solid #e8e4d5;
            position: relative;
            overflow: hidden;
            /* Removed transform-style for better performance */
            will-change: transform;
            transform: translateZ(0);
        }

        /* Simplified hover effect */
        .container:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.2);
        }

        /* Removed redundant container decorations */

        h1 {
            color: var(--primary-color);
            font-family: 'Dancing Script', cursive;
            font-size: 4.5rem;
            margin-bottom: 40px;
            text-shadow: 3px 3px 5px rgba(0,0,0,0.1);
            position: relative;
            display: inline-block;
        }

        /* Simplified animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.03); }
        }

        h1::after {
            content: "";
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        }

        /* Removed unnecessary animation */

        .message-container {
            position: relative;
            padding: 40px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
            margin: 40px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid rgba(193, 122, 116, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .message-container:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .message-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--primary-color));
            opacity: 0.3;
        }

        .message {
            font-size: 1.5rem;
            line-height: 2;
            margin-bottom: 30px;
            white-space: pre-line;
            position: relative;
            z-index: 2;
            text-align: justify;
            font-weight: 500;
        }

        .message::first-letter {
            font-size: 2.5rem;
            color: var(--primary-color);
            font-family: 'Dancing Script', cursive;
            float: left;
            margin-right: 5px;
            line-height: 1;
        }

        .photo-frame {
            width: 350px;
            height: 350px;
            margin: 0 auto 40px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2), 0 0 0 10px white;
            position: relative;
            transform: rotate(-2deg);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            z-index: 1;
            will-change: transform;
        }

        .photo-frame:hover {
            transform: rotate(0deg) scale(1.05);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3), 0 0 0 10px white;
        }

        /* Simplified photo frame effects */

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
            will-change: transform;
        }

        .photo-frame:hover img {
            transform: scale(1.05);
        }

        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 2.8rem;
            color: var(--primary-color);
            text-shadow: 2px 2px 3px rgba(0,0,0,0.1);
            position: relative;
            display: inline-block;
        }

        .signature::before, .signature::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 30px;
            height: 2px;
            background: var(--primary-color);
            opacity: 0.5;
        }

        .signature::before {
            left: -40px;
        }

        .signature::after {
            right: -40px;
        }

        .signature-container {
            margin-top: 20px;
            padding-top: 20px;
            position: relative;
            text-align: center;
        }

        .signature-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            opacity: 0.5;
        }

        /* Heart animation optimization */
        .floating-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            color: var(--secondary-color);
            font-size: 1.5rem;
            opacity: 0;
            will-change: transform, opacity;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        /* Simplified sparkle effect */
        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: var(--accent-color);
            border-radius: 50%;
            filter: drop-shadow(0 0 3px gold);
            will-change: transform, opacity;
        }

        @keyframes sparkle {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(5); opacity: 0; }
        }

        .ribbon {
            position: absolute;
            width: 150px;
            height: 150px;
            overflow: hidden;
            z-index: 10;
        }

        .ribbon-top-right {
            top: 0;
            right: 0;
        }

        .ribbon-top-right::before,
        .ribbon-top-right::after {
            content: '';
            position: absolute;
            z-index: -1;
            display: block;
            border: 5px solid var(--primary-color);
            border-top-color: transparent;
            border-right-color: transparent;
        }

        .ribbon-top-right::before {
            top: 0;
            left: 0;
        }

        .ribbon-top-right::after {
            bottom: 0;
            right: 0;
        }

        .ribbon-top-right span {
            position: absolute;
            display: block;
            width: 225px;
            padding: 15px 0;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            box-shadow: 0 5px 10px rgba(0,0,0,.1);
            color: white;
            font-size: 1rem;
            text-transform: uppercase;
            text-align: center;
            right: -25px;
            top: 30px;
            transform: rotate(45deg);
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        /* Simplified ribbon animation */
        @keyframes ribbonShake {
            0%, 100% { transform: rotate(45deg) translateX(0); }
            50% { transform: rotate(45deg) translateX(5px); }
        }

        .btn-love {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            padding: 18px 35px;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 30px auto 20px;
            box-shadow: 0 10px 20px rgba(193, 122, 116, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            display: block;
            width: fit-content;
            will-change: transform;
        }

        .btn-love:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 25px rgba(193, 122, 116, 0.4);
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
        }

        .btn-love:active {
            transform: translateY(1px);
        }

        /* Simplified button effects */

        .envelope {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.7);
            opacity: 0;
            transition: opacity 0.5s ease;
            visibility: hidden;
        }

        .envelope.active {
            opacity: 1;
            pointer-events: auto;
            visibility: visible;
        }

        .envelope-content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            max-width: 500px;
            position: relative;
            transform: scale(0.5);
            transition: transform 0.5s ease;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            will-change: transform;
        }

        .envelope.active .envelope-content {
            transform: scale(1);
        }

        .close-envelope {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary-color);
        }

        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            transition: transform 0.3s ease, background 0.3s ease;
            will-change: transform;
        }

        .music-control:hover {
            transform: scale(1.1);
            background: var(--secondary-color);
        }

        /* Simplified confetti animation */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
            z-index: 100;
            will-change: transform, opacity;
        }

        @keyframes confettiFall {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) translateX(var(--end-x)) rotate(var(--end-rotate)); opacity: 0; }
        }

        /* Responsive improvements */
        @media (max-width: 768px) {
            .container {
                padding: 30px;
                width: 90%;
            }
            
            h1 {
                font-size: 2.8rem;
            }
            
            .photo-frame {
                width: 250px;
                height: 250px;
            }

            .message {
                font-size: 1.2rem;
            }
            
            .btn-love {
                padding: 15px 25px;
                font-size: 1.1rem;
            }
        }

        /* Add animation classes we need from animate.css */
        .animate__animated {
            animation-duration: 1s;
            animation-fill-mode: both;
        }
        
        .animate__fadeIn {
            animation-name: fadeIn;
        }
        
        .animate__fadeInDown {
            animation-name: fadeInDown;
        }
        
        .animate__fadeInUp {
            animation-name: fadeInUp;
        }
        
        .animate__pulse {
            animation-name: pulse;
            animation-timing-function: ease-in-out;
        }
        
        .animate__infinite {
            animation-iteration-count: infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translate3d(0, -100%, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translate3d(0, 100%, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }
    </style>
</head>
<body>
    <div class="music-control" id="musicControl">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 18V5l12-2v13"></path>
            <circle cx="6" cy="18" r="3"></circle>
            <circle cx="18" cy="16" r="3"></circle>
        </svg>
    </div>
    
    <div class="container">
        <div class="ribbon ribbon-top-right">
            <span>Special Birthday</span>
        </div>
        
        <h1 class="animate__animated animate__fadeInDown">Happy Birthday, Mahal!</h1>
        
        <div class="photo-frame">
            <img src="USS.jpg" alt="Our Beautiful Memory" loading="lazy">
        </div>
        
        <div class="message-container animate__animated animate__fadeInUp">
            <div class="message">
                Hi, Mahal!

                You really thought I was done with my greetings? OF COURSE NOT! You know me, oa.I could never run out of words when it comes to you. I told you, I was just waiting of us because every moment with you is special, and I always want to look back at them and kikiligin hehe.
                
                Mahal, I love you so, so, so much. More than words can ever explain, more than my heart can hold. Every single day, I thank God for you, for giving me another chance to love you, to make you happy, to hold you close. You are the best thing that ever happened to me, and I promise to never take you for granted again.
                
                This time, I'll love you better. I'll hold you tighter, cherish you more, and remind you every day how much you mean to me. You are my home, my peace, my greatest happiness. No one else, nothing else, only you. Always you. Forever you.
                
                Happy, happy birthday again, my love! I hope this day brings you as much happiness as you bring into my life. You deserve all the love, all the joy, all the best things in this world. And I will spend my life making sure you feel that every single day.
                
                Mahal na mahal kita. Sobra. Walang bawas, walang kulang. Ikaw lang, ngayon at habang buhay.
            </div>
        </div>
        
        <button class="btn-love animate__animated animate__pulse animate__infinite" id="loveButton">Send My Love</button>
        
        <div class="signature animate__animated animate__fadeIn">
            Forever yours,<br>
            Da!
        </div>
        
        <div class="floating-hearts" id="heartsContainer"></div>
    </div>
    
    <div class="envelope" id="envelope">
        <div class="envelope-content">
            <button class="close-envelope" id="closeEnvelope">×</button>
            <h2 style="color: var(--primary-color); font-family: 'Dancing Script', cursive; margin-bottom: 20px;">A Special Message Just For You</h2>
            <p style="font-size: 1.2rem; line-height: 1.8;">
                My dearest Mahal,<br><br>
                On this special day, I want you to know that you are the most precious person in my life. 
                Every moment with you is a gift I cherish deeply. I love you more than words can express, 
                more than the stars in the sky, more than life itself.<br><br>
                Happy Birthday, my love. May this year bring you all the happiness you deserve.
            </p>
            <div style="margin-top: 30px; font-family: 'Dancing Script', cursive; font-size: 2rem; color: var(--primary-color);">
                Always and forever,<br>Da!
            </div>
        </div>
    </div>

    <!-- Audio preload -->
    <audio id="bgMusic" preload="metadata" loop>
        <source src="lover.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Use a limited number of hearts for better performance
        const MAX_HEARTS = 20;
        const MAX_SPARKLES = 10;
        
        // Create floating hearts - optimized
        function createHearts() {
            const container = document.getElementById('heartsContainer');
            const heartCount = Math.min(15, MAX_HEARTS - container.children.length);
            const heartTypes = ['❤', '🧡', '💗'];
            
            if (heartCount <= 0) return;
            
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerHTML = heartTypes[Math.floor(Math.random() * heartTypes.length)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animation = `float ${Math.random() * 5 + 5}s ease-in-out forwards`;
                container.appendChild(heart);
                
                // Clean up hearts after animation
                setTimeout(() => {
                    if (heart.parentNode) heart.parentNode.removeChild(heart);
                }, 10000);
            }
        }
        
        // Create sparkles on click - optimized
        function createSparkles(e) {
            const sparkleCount = Math.min(8, MAX_SPARKLES);
            
            for (let i = 0; i < sparkleCount; i++) {
                const sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                sparkle.style.left = e.clientX + (Math.random() * 40 - 20) + 'px';
                sparkle.style.top = e.clientY + (Math.random() * 40 - 20) + 'px';
                sparkle.style.animation = `sparkle 1.5s ease-out forwards`;
                sparkle.style.backgroundColor = `hsl(${Math.random() * 60 + 30}, 100%, 50%)`;
                document.body.appendChild(sparkle);
                
                // Remove sparkle after animation
                setTimeout(() => {
                    if (sparkle.parentNode) sparkle.parentNode.removeChild(sparkle);
                }, 1500);
            }
        }
        
        // Create confetti explosion - optimized
        function createConfetti() {
            const colors = ['#ff0000', '#ff7700', '#ffdd00', '#00ff00', '#0088ff'];
            const maxConfetti = window.innerWidth < 768 ? 30 : 50;
            
            for (let i = 0; i < maxConfetti; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = -10 + 'px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 8 + 5 + 'px';
                confetti.style.height = Math.random() * 8 + 5 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.opacity = Math.random() * 0.7 + 0.3;
                
                // Set CSS variables with fewer calculations
                confetti.style.setProperty('--end-x', Math.round(Math.random() * 200 - 100) + 'px');
                confetti.style.setProperty('--end-rotate', Math.round(Math.random() * 360) + 'deg');
                confetti.style.animation = `confettiFall ${Math.random() * 2 + 2}s linear forwards`;
                
                document.body.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    if (confetti.parentNode) confetti.parentNode.removeChild(confetti);
                }, 4000);
            }
        }
        
        // Love button effect - with debouncing
        let buttonTimeout = null;
        document.getElementById('loveButton').addEventListener('click', function() {
            if (buttonTimeout) return;
            
            createConfetti();
            document.getElementById('envelope').classList.add('active');
            
            buttonTimeout = setTimeout(() => {
                buttonTimeout = null;
            }, 1000);
        });
        
        // Close envelope
        document.getElementById('closeEnvelope').addEventListener('click', function() {
            document.getElementById('envelope').classList.remove('active');
        });
        
        // Click sparkle effect with debouncing
        let clickTimeout = null;
        document.addEventListener('click', function(e) {
            if (clickTimeout) return;
            
            if (e.target.id !== 'loveButton' && e.target.id !== 'musicControl' && e.target.id !== 'closeEnvelope') {
                createSparkles(e);
                
                clickTimeout = setTimeout(() => {
                    clickTimeout = null;
                }, 200);
            }
        });
        
        // Music control - optimized
        const musicControl = document.getElementById('musicControl');
        const bgMusic = document.getElementById('bgMusic');
        let musicPlaying = false;
        
        musicControl.addEventListener('click', function() {
            if (musicPlaying) {
                bgMusic.pause();
                musicControl.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 18V5l12-2v13"></path>
                        <circle cx="6" cy="18" r="3"></circle>
                        <circle cx="18" cy="16" r="3"></circle>
                    </svg>
                `;
            } else {
                // Load audio only when user interacts
                bgMusic.load();
                bgMusic.play().catch(e => console.log("Audio play failed: ", e));
                musicControl.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                        <line x1="15" y1="12" x2="23" y2="12"></line>
                    </svg>
                `;
            }
            musicPlaying = !musicPlaying;
        });
        
        // Initialize - with optimizations
        window.addEventListener('load', function() {
            // Create initial hearts
            createHearts();
            
            // Create fewer hearts at longer intervals
            setInterval(createHearts, 3000);
            
            // Don't animate the container continuously - too resource intensive
            // Instead, just set the initial look
            document.querySelector('.container').style.transform = 'translateY(0)';
            
            // Animate elements once on load rather than sequentially
            const elements = document.querySelectorAll('.animate__animated');
            elements.forEach(el => {
                el.style.opacity = 1;
            });
            
            // Add class for ribbon animation
            document.querySelector('.ribbon-top-right span').style.animation = 'ribbonShake 2s infinite';
        });
        
        // Add intersection observer for animations when elements are in view
        if ('IntersectionObserver' in window) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate__animated');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.photo-frame, .message-container, .signature').forEach(el => {
                observer.observe(el);
            });
        }
    </script>
</body>
</html>
